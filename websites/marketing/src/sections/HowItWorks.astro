---
import Card from "../components/Card/Card.astro";
import Feature from "../components/Feature.astro";
import Title from "../components/Title.astro";
import Text from "../components/Text.astro";
import welcomeSrc from "./assets/howitworks/welcome.png";
import reactSrc from "./assets/howitworks/react.png";
import audienceSrc from "./assets/howitworks/audience.png";
import aboveTheFoldSrc from "./assets/above-fold.png";
import mfrachetSrc from "./assets/howitworks/mfrachet.png";

const howItWorks = [
  {
    title: "1. You setup your instance",
    imageSrc: welcomeSrc,
    content: [
      "First of all, since Progressively is self hosted, you have to setup the tool.",
      "Following the get started guide, you will install the dashboard, the APIs and the database.",
      "After that, you can create your admin user.",
    ],
  },

  {
    title: "2. Configure your first feature flag",
    imageSrc: audienceSrc,
    content: [
      "Once your instance is running, you can create a project, its environments, and your first feature flag.",
      "Take some time to customize how your feature flag resolves, try to schedule an update, play with the dashboard.",
    ],
  },
  {
    title: "3. Choose a SDK",
    imageSrc: reactSrc,
    content: [
      "It's time to setup your codebase.",
      "Choose one of the available SDKs, install it, set it up, and deploy your project.",
      "Once a feature flag is evaluated, you will know it from the insights panel feature.",
    ],
  },
  {
    title: "5. Your users will access your website",
    imageSrc: mfrachetSrc,
    content: [
      "When your users hit your webpage, the feature flag evaluation will start.",
      "The feature flag evaluation will check the user fields (provided by you), making computations between them and the feature flag rules, and finally resolves a value.",
      "Depending on this value, the UI will adjust a show the expected variant.",
    ],
  },
  {
    title: "5. Enjoy your insights",
    imageSrc: aboveTheFoldSrc,
    content: [
      "Once this is done, you are all setup and ready to build awesome feature and understand your audience behaviour.",
    ],
  },
];
---

<section class="bg-slate-100 px-4">
  <div class="max-w-6xl w-full mx-auto py-12">
    <div class="text-center pb-12">
      <Title as="h2" size="L">How it works?</Title>
    </div>

    <Card>
      <ul class="px-6 flex flex-col">
        {
          howItWorks.map((feat, i) => (
            <li>
              <Feature
                title={feat.title}
                imageSrc={feat.imageSrc}
                reversed={i % 2 !== 0}
                noSizeConstraints
              >
                <div class="flex flex-col gap-4">
                  {feat.content.map((c) => (
                    <Text size="L">{c}</Text>
                  ))}
                </div>
              </Feature>
            </li>
          ))
        }
      </ul>
    </Card>
  </div>
</section>
