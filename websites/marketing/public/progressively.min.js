!(function () {
  "use strict";
  var t = (function () {
      var t = window.document.currentScript,
        e = null == t ? void 0 : t.getAttribute("data-progressively-endpoint"),
        i =
          null == t ? void 0 : t.getAttribute("data-progressively-client-key"),
        n =
          null == t
            ? void 0
            : t.getAttribute("data-progressively-qualitative-tracking");
      if (!e || !i)
        throw new Error(
          "[Progressively]: [data-progressively-endpoint] and [data-progressively-client-key] attributes should be set on the script tag."
        );
      var r = { clientKey: i };
      return {
        endpoint: e,
        bSixtyFour: btoa(JSON.stringify(r)),
        shouldTrackQuantitative: n,
      };
    })(),
    e = t.endpoint,
    i = t.bSixtyFour,
    n = t.shouldTrackQuantitative,
    r = function (t, n) {
      void 0 === n && (n = {});
      var r = {
        name: t,
        url: window.location.href,
        referer: window.document.referrer || null,
        viewportWidth: window.innerWidth,
        viewportHeight: document.documentElement.scrollHeight,
        posX: n.posX,
        posY: n.posY,
        data: n.data
          ? "string" == typeof n.data
            ? n.data
            : JSON.stringify(n.data)
          : void 0,
      };
      return fetch("".concat(e, "/sdk/").concat(i), {
        method: "POST",
        body: JSON.stringify(r),
        headers: { "Content-Type": "application/json" },
      });
    },
    o = function () {
      return r("Page View");
    };
  !(function (t) {
    window.addEventListener("popstate", t);
    var e = history.pushState,
      i = history.replaceState;
    (history.pushState = function () {
      for (var i = [], n = 0; n < arguments.length; n++) i[n] = arguments[n];
      e.apply(this, i), t();
    }),
      (history.replaceState = function () {
        for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
        i.apply(this, e), t();
      });
  })(o),
    n &&
      (function (t) {
        document.addEventListener("click", function (e) {
          t("__click", { posX: e.pageX, posY: e.pageY });
        });
      })(r),
    -1 !== window.location.href.indexOf("#__progressively") &&
      (function (t) {
        var e = document.createElement("script");
        (e.src =
          "https://progressively.app/progressively.qualitative-analytics.min.js"),
          e.setAttribute("data-progressively-endpoint", t),
          document.body.appendChild(e);
      })(e),
    o(),
    (window.track = r);
})();
